<!DOCTYPE html>
<html>
<head><style type="text/css">
.garden {
  position: relative;
  width : 1000px;
  height: 1000px;
  border: 5px solid #CCC;
  border-radius: 10px;
}

.ball {
  position: absolute;
  top   : 90px;
  left  : 90px;
  width : 20px;
  height: 20px;
  background: green;
  border-radius: 100%;
}

.lw { font-size: 60px; }</style>


<title>Parallax Demo</title>
</head>
<body>
<!-- Start your code here -->

<p class="lw">Parallax Demo 1.0.3</p>
  
<div class="garden">
  <canvas id="myCanvas" width="1000" height="1000" style="border:1px solid #000000;"></canvas>    
  <div class="ball" style="top: 230px; left: 80px;"></div>
</div>

<div id="slidecontainer">
  <p>
    <img id="c1" src="https://github.com/CharleyTwo/BounD/blob/master/test/cell000a.png?raw=true" alt="c1" width="50" height="25">
    <input type="range" min="1" max="100" value="5" class="slider" id="c1_slider"></p>
  <p>
    <img id="c2" src="https://github.com/CharleyTwo/BounD/blob/master/test/cell000b.png?raw=true" alt="c2" width="50" height="25">
    <input type="range" min="1" max="100" value="10" class="slider" id="c2_slider"></p>
  <p>
    <img id="c3" src="https://github.com/CharleyTwo/BounD/blob/master/test/cell000c.png?raw=true" alt="c3" width="50" height="25">
    <input type="range" min="1" max="100" value="50" class="slider" id="c3_slider"></p>
</div>
  
<pre class="output">alpha: null
beta : null
gamma: null
</pre>

<!-- End your code here -->

<script>var ball   = document.querySelector('.ball');
var garden = document.querySelector('.garden');
var output = document.querySelector('.output');

var maxX = garden.clientWidth  - ball.clientWidth;
var maxY = garden.clientHeight - ball.clientHeight;

var c1_slider = document.getElementById("c1_slider");
var c2_slider = document.getElementById("c2_slider");
var c3_slider = document.getElementById("c3_slider");
  
function myCanvas(x1,x2,x3) {
    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    var img1 = document.getElementById("c1");
    var img2 = document.getElementById("c2");
    var img3 = document.getElementById("c3");
    ctx.drawImage(img1,x1,10);
    ctx.drawImage(img2,x2,10);
    ctx.drawImage(img3,x3,10);
}

function handleOrientation(event) {
  var z = event.alpha; // In degree in the range [-180,180]
  var x = event.beta;  // In degree in the range [-180,180]
  var y = event.gamma; // In degree in the range [-90,90]

  
  output.innerHTML  = "alpha: " + z + "\n";
  output.innerHTML += "beta : " + x + "\n";
  output.innerHTML += "gamma: " + y + "\n";

  // Because we don't want to have the device upside down
  // We constrain the x value to the range [-90,90]
  if (x >  90) { x =  90;}
  if (x < -90) { x = -90;}

  var x1 = 500-155 + (y * c1_slider) / 10;
  var x2 = 500-155 + (y * c2_slider) / 10;
  var x3 = 500-155 + (y * c3_slider) / 10;
  myCanvas(x1,x2,x3);
  
  // To make computation easier we shift the range of 
  // x and y to [0,180]
  x += 90;
  y += 90;

  // 10 is half the size of the ball
  // It center the positioning point to the center of the ball
  ball.style.top  = (maxX*x/180 - 10) + "px";
  ball.style.left = (maxY*y/180 - 10) + "px";
  

}

window.addEventListener('deviceorientation', handleOrientation);

</script></body>
